---
title: "Latex, YAML, RMarkdown"
subtitle: "Options, packages and examples for PDF print"
mainfont: "Verdana"
classoption: "twoside" # für unterschiedliche gerade und ungerade Seitenformatierungen
author: "Fabian Koch"
header-includes:
  - \setlength{\columnsep}{18pt}
  - \usepackage{multicol}
  - \newcommand{\hideFromPandoc}[1]{#1} # https://stackoverflow.com/questions/40982836/latex-multicolumn-block-in-pandoc-markdown
  - \hideFromPandoc{
      \let\Begin\begin
      \let\End\end
      }
  - \definecolor{DoStat}{RGB}{184, 40, 60} #mit package xcolor (standardmäßig geladen)
  - \usepackage{fancyhdr}
  - \pagestyle{fancy}
  - \fancyhf{}
  - \fancyhead[LE]{\itshape\nouppercase{\color{DoStat}\leftmark}}
  - \fancyhead[RO]{\itshape\nouppercase{\color{DoStat}\leftmark}}
  - \fancyfoot[LE]{\color{DoStat} \thepage \hspace{0.5cm} dortmunder\textbf{statistik}  • nr. 211 • jahresbericht 2018 • bevölkerung}
  - \fancyfoot[RO]{\color{DoStat} dortmunder\textbf{statistik}  • nr. 211 • jahresbericht 2018 • bevölkerung \hspace{0.5cm} \thepage}
  # - \renewcommand{\headrulewidth}{0.4pt}
  # - \renewcommand{\footrulewidth}{0.4pt}

output: 
  pdf_document: 
    keep_tex: true
    latex_engine: "xelatex"
    toc_depth: 2

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, out.width = '100%', dpi=300)
```

\newpage 
\tableofcontents 
<!-- \listoffigures -->
<!-- \listoftables -->
\newpage

```{r echo = FALSE, message=FALSE}
library(tidyverse) # import/wrangle
library(ggplot2) # plot/maps
library(tmap) # Dataset/Maps
library(kableExtra) # tables
library(viridis) # palettes
```


```{r echo = FALSE}
data("World")

# Data mit geometry
WorldGeom <- World
# Data ohne
WorldData <- World %>% 
  sf::st_drop_geometry()
```
\newpage

# Wiki

### packages

\Begin{multicols}{2}

#### R - rticles
Templates und Vorlagen wissenschaftlicher Journals

[rtcles](https://github.com/rstudio/rticles)

#### R - ymlthis 

package zur vereinfachten Verwendung von YAML in RMarkdown und bookdown

[Einführung](https://cran.r-project.org/web/packages/ymlthis/vignettes/introduction-to-ymlthis.html)

[Refrence Manual](https://cran.r-project.org/web/packages/ymlthis/ymlthis.pdf)

[YAML Field Guide](https://cran.r-project.org/web/packages/ymlthis/vignettes/yaml-fieldguide.html)

[yml_latex.R](https://github.com/r-lib/ymlthis/blob/master/R/yml_latex.R)

[yml_latex_opts - Set LaTeX YAML options for PDF output ](https://rdrr.io/github/r-lib/ymlthis/man/yml_latex_opts.html)

[yml_resource_files - Add external resource files to R Markdown document](https://www.rdocumentation.org/packages/ymlthis/versions/0.1.2/topics/yml_resource_files)

[yml_output - Capture, validate, and write output YAML](https://github.com/r-lib/ymlthis/blob/master/R/yml_output.R)

#### R - bookdown

Authoring Books and Technical Documents with R Markdown

Single Page Documents https://bookdown.org/yihui/bookdown/a-single-document.html

customization https://bookdown.org/yihui/bookdown/customization.html
\columnbreak

#### Template Info

[R Markdown Document Templates](https://rstudio.github.io/rstudio-extensions/rmarkdown_templates.html)

[Latex engines](https://tex.stackexchange.com/questions/36/differences-between-luatex-context-and-xetex


#### Latex - Multicol
https://www.ctan.org/pkg/multicol


https://tex.stackexchange.com/questions/8683/how-do-i-force-a-column-break-in-a-multi-column-page

https://stackoverflow.com/questions/40982836/latex-multicolumn-block-in-pandoc-markdown

Mögliche Lösungen für 2 Spalten:
https://github.com/yihui/rmarkdown-cookbook/issues/19

https://stackoverflow.com/questions/34808612/how-make-2-column-layout-in-r-markdown-when-rendering-pdf


#### Latex - koma Script

package und class  Sammlung https://www.ctan.org/pkg/koma-script

inkl. Fußnoten package https://ctan.org/pkg/scrlayer-scrpage?lang=de

#### Latex - fancyhdr
[Kopf- und Fußzeilen](https://ctan.org/pkg/fancyhdr?lang=de)

[User Guide](http://tug.ctan.org/tex-archive/macros/latex/contrib/fancyhdr/fancyhdr.pdf)

[Abschnitt aus "bookdown](https://bookdown.org/yihui/rmarkdown-cookbook/latex-header.html)

\newpage

### Formatierung
#### Seitenwechsel 
Latex Page Breaks https://web.archive.org/web/20100622022829/http://help-csli.stanford.edu/tex/latex-pagebreaks.shtml


### Text
# Headline 1
## Headline 2
### Headline 3
#### Headline 4
##### Headline 5


Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. 




\End{multicols}









vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.



\newpage


# Gemischtes 1 und 2 Spalten Layout

\Begin{multicols}{2}
```{r echo = FALSE}
WorldData %>% 
  select(
    name,
    pop_est) %>% 
  arrange(desc(pop_est)) %>% 
  head(5) %>% 
  ggplot() + 
  geom_col(aes(x = pop_est, y = forcats::fct_reorder(name, pop_est))) +
  xlab("Bevölkerung") +
  ylab("")

```

Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
\columnbreak

```{r echo = FALSE}

WorldData %>% 
  select(
    name,
    pop_est) %>% 
  arrange(desc(pop_est)) %>% 
  head(5) %>% 
  ggplot() + 
  geom_col(aes(x = pop_est, y = forcats::fct_reorder(name, pop_est))) +
  xlab("Bevölkerung") +
  ylab("") +
  theme(axis.text=element_text(size=12),
        axis.title=element_text(size=14,face="bold"))

```

Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.

\End{multicols}

Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.


```{r echo = FALSE}
WorldData %>% 
  select(
    continent,
    pop_est_dens,
    gdp_cap_est,
    life_exp,
    well_being,
    inequality,
    HPI) %>% 
  group_by(continent) %>% 
  summarise(
    across(
      pop_est_dens:HPI, 
      ~round(
        mean(., na.rm = TRUE)
        ,1))) %>% 
  filter(!is.na(well_being)) %>% 
  kableExtra::kbl(
    col.names = c(
      "Kontinent",
      "Bevölkerungsdichte",
      "BIP (pro Kopf)",
      "Lebenserwartung",
      "Wohlbefinden",
      "Ungleichheit",
      "Happy Planet"),
    booktabs = T) %>% 
  kableExtra::add_header_above(c(
    " " = 4, 
    "Index" = 3)) %>% 
  kableExtra::kable_styling(latex_options = c(
    "striped",
    "scale_down",
    "reapeat_header"))

```